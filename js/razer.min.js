var e=[];function n(e,t=0,a=2){if(t>a)return"Object";const o={};for(let i in e){let s=e[i];s instanceof Node?s={id:s.id}:s instanceof Window?s="Window":s instanceof Object&&(s=n(s,t+1,a)),o[i]=s}return t?o:JSON.stringify(o)}Object.keys(window).forEach((n=>{/^on/.test(n)&&e.push(n.slice(2))})),window.addEventListener("load",(function(t){const a=new WebSocket("https:"===location.protocol?"wss://":"ws://"+window.location.hostname+":2794");a.onopen=function(){a.send('{"event_name":"'+t.type+'","event":'+n(t)+"}");for(var o=0;o<e.length;o++)window.addEventListener(e[o],(function(e){a.send('{"event_name":"'+e.type+'","event":'+n(e)+"}")}))},a.onmessage=function(e){let n=JSON.parse(e.data);if("js"===n.name)eval(n.data);else if("html"===n.name)document.querySelector("body").innerHTML=n.data;else if("eval"===n.name){var t=n.data;a.send('{"event_name":"eval","event":"'+eval(t).replaceAll('"','\\"')+'","data":"'+t.replaceAll('"','\\"')+'"}')}}}));