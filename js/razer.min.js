var events=[];function stringify_object(e,t=0,n=2){if(t>n)return"Object";const a={};for(let o in e){let s=e[o];s instanceof Node?s={id:s.id}:s instanceof Window?s="Window":s instanceof Object&&(s=stringify_object(s,t+1,n)),a[o]=s}return t?a:JSON.stringify(a)}Object.keys(window).forEach((e=>{/^on/.test(e)&&events.push(e.slice(2))})),window.addEventListener("load",(function(event){const socket=new WebSocket("https:"===location.protocol?"wss://":"ws://"+window.location.hostname+":2794");socket.onopen=function(){socket.send('{"event_name":"'+event.type+'","event":'+stringify_object(event)+"}");for(var e=0;e<events.length;e++)window.addEventListener(events[e],(function(e){socket.send('{"event_name":"'+e.type+'","event":'+stringify_object(e)+"}")}))},socket.onmessage=function(event){let data=JSON.parse(event.data);if("js"===data.name)eval(data.data);else if("html"===data.name)document.querySelector("body").innerHTML=data.data;else if("eval"===data.name){var run=data.data;socket.send('{"event_name":"eval","event":"'+eval(run).replaceAll('"','\\"')+'","data":"'+run.replaceAll('"','\\"')+'"}')}}}));
