var events=[];Object.keys(window).forEach((e=>{/^on/.test(e)&&events.push(e.slice(2))}));let socket=new WebSocket("ws://"+window.location.hostname+":2794");for(var i=0;i<events.length;i++)window.addEventListener(events[i],(function(e){socket.send('{"event_name":"'+e.type+'","event":'+stringify_object(e)+"}")}));function stringify_object(e,t=0,n=2){if(t>n)return"Object";const a={};for(let i in e){let o=e[i];o instanceof Node?o={id:o.id}:o instanceof Window?o="Window":o instanceof Object&&(o=stringify_object(o,t+1,n)),a[i]=o}return t?a:JSON.stringify(a)}socket.onmessage=function(event){let data=JSON.parse(event.data);"js"===data.name?eval(data.data):"html"===data.name&&(document.querySelector("body").innerHTML=data.data)};
